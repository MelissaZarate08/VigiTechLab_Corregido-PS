import{n as l}from"./index-DG_JPB1t.js";const m="http://54.211.156.108:8081";async function p(){try{const e=await fetch(`${m}/sensor/camera`,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error ${e.status}`);const c=await e.json();return Array.isArray(c)?c.sort((t,r)=>new Date(r.timestamp)-new Date(t.timestamp)):[]}catch(e){return console.error("fetchGallery error:",e),[]}}async function h(){const e=document.querySelector(".gallery-container"),c=document.getElementById("btn-back"),t=document.getElementById("image-modal"),r=t.querySelector(".modal-content img");c.addEventListener("click",()=>l("#/camMotion"));let o=await p();o=o.slice(0,30),o.forEach((a,i)=>{const n=document.createElement("div");n.classList.add("card");const s=document.createElement("img");if(s.src=a.image_path,s.alt=`Captura ${a.id}`,n.appendChild(s),i<5){const d=document.createElement("span");d.classList.add("badge-new"),d.textContent="Nuevo",n.appendChild(d)}n.addEventListener("click",()=>{r.src=a.image_path,t.classList.remove("hidden")}),e.appendChild(n)}),t.addEventListener("click",a=>{a.target.classList.contains("modal-backdrop")&&(t.classList.add("hidden"),r.src="")})}window.addEventListener("DOMContentLoaded",h);export{h as initGaleria};
