import n from"https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.esm.js";import{l}from"./logeoService-DGcYLc-w.js";import{n as i}from"./index-DG_JPB1t.js";function d(){document.getElementById("login-form").addEventListener("submit",async r=>{r.preventDefault();const s=document.getElementById("login-email").value.trim(),a=document.getElementById("login-password").value;try{const{token:e,userName:t,role:o,isActive:m}=await l({email:s,password:a});localStorage.setItem("authToken",e),localStorage.setItem("currentUser",JSON.stringify({name:t,role:o,isActive:m})),n.fire({toast:!0,position:"top-end",icon:"success",title:`¡Bienvenido, ${t}!`,showConfirmButton:!1,timer:1500}),setTimeout(()=>{o==="admin"?i("#/admin"):i("#/dashboard")},1600)}catch(e){n.fire({toast:!0,position:"top-end",icon:"error",title:e.message||"Credenciales inválidas",showConfirmButton:!1,timer:2e3})}})}document.addEventListener("DOMContentLoaded",d);export{d as initLogin};
